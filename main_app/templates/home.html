{% extends 'base.html' %}
{% block content %}

<div class="container" style="margin-top: 10vmin;">

  <!-- Mobile Berry Image -->
  <div class="d-block d-lg-none text-center mb-5 position-relative">
    <img src="static/media/berry.webp" alt="Berry Image" class="img-fluid">
    <p class="lead text-center mt-3" style="font-size: 5vmin;"><strong>Ethical Coffee from Around the World</strong></p>
    <h1 class="display-1 font-weight-normal d-block d-md-none" style="font-size: 20vmin; color: black;">SIP KINDLY</h1>
  </div>

  <div class="row mt-5">
    <div class="col-md-6 d-flex flex-column justify-content-center text-center text-md-start" style="height: 55vmin">
      <div>
        <p class="lead d-none d-md-block"><strong>Karma - Ethical Coffee from Around the World</strong></p>
        <h1 class="display-1 font-weight-normal d-none d-md-block">SIP</h1>
        <h1 class="display-1 font-weight-normal d-none d-md-block">KINDLY</h1>
        <p class="lead font-weight-normal">The best coffee from around the world, direct from the farm to your doorstep. We're fully transparent about our costs and logistics so you can drink without the ethical quandary. 100% compostable packaging and letterbox friendly.</p>
        <a class="btn btn-dark" href="{% url 'index' %}">Shop Coffee</a>
        <a class="btn btn-dark m-4" href="{% url 'learn' %}">Learn More</a>
      </div>
    </div>
    <!-- Hiding Berry image on mobile devices -->
    <div class="col-md-6 d-flex flex-column justify-content-center text-center text-md-start d-none d-lg-flex">
      <div class="h-100 w-100 d-flex flex-column justify-content-end shadow-sm" style="background-image: url('static/media/berry.webp'); background-size: cover;"></div>
    </div>
  </div>




  <div id="productCarousel" class="carousel carousel-dark slide mt-5">
    <div class="carousel-inner">
      {% for product in products %}
      {% if forloop.counter0|divisibleby:3 %}
      {% if not forloop.first %}
      </div>
      </div>
      {% endif %}
      <div class="carousel-item {% if forloop.counter == 1 %}active{% endif %}">
        <div class="row g-4">
          {% endif %}

          <div class="index-product col pt-3" data-origin="{{ product.origin }}" data-roast="{{ product.roast }}">
            <a href="{% url 'detail' product.id %}" class="card h-100">
              <img src="{{ product.image.url }}" class="card-img-top" alt="Product image" />
              <div class="card-body">
                <h5 class="card-title">{{ product.name }}</h5>
                
                <!-- Hide product flavour on mobile -->
                <p class="card-text d-none d-md-block">${{ product.price }}</p>
                <p class="card-text d-none d-md-block">{{ product.flavour }}</p>
              </div>
            </a>
          </div>

          {% if forloop.last %}
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </div>

    <!-- Hiding carousel controls on mobile -->
    <button class="carousel-control-prev d-none d-md-block" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next d-none d-md-block" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <div class="row bg-light pt-5 px-4 mt-4 text-left overflow-hidden d-flex align-items-end" style="background-image: url('static/media/fields.webp'); background-size: cover; color: white; height: 60vmin">
    <div class="col pb-5">
      <h2 class="display-6">Our Story </h2>
      <p class="lead d-none d-md-block">Karma Coffee and what it really looks like on the ground.</p>
      <a class="btn btn-light" href="{% url 'learn' %}">Read More</a>
      <br>
    </div>
  </div>

</div>


{% endblock %}
